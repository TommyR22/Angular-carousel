{"version":3,"sources":["ng://carousel/lib/carousel.service.ts","ng://carousel/lib/carousel.component.ts","ng://carousel/lib/carousel.module.ts"],"names":["CarouselService","Injectable","args","providedIn","CarouselComponent","elRef","renderer","this","t","x","y","avatarSelected","EventEmitter","prototype","ngOnInit","_this","emit","nativeElement","querySelector","childNodes","alt","o","listen","event","gestureStart","gestureMove","gestureEnd","e","tracking","start","Date","getTime","clientX","clientY","preventDefault","end","deltaTime","deltaX","deltaY","thresholdTime","thresholdDistance","Math","abs","moveToSelected","element","prev","nextElementSibling","curr","prevSecond","nextSecond","nextThird","prevThird","next","previousElementSibling","removeClass","addClass","Component","selector","template","styles","ElementRef","Renderer2","Output","CarouselModule","NgModule","imports","declarations","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CarouselService {\n\n  constructor() { }\n}\n","import {Component, ElementRef, EventEmitter, OnInit, Output, Renderer2} from '@angular/core';\n\n@Component({\n  selector: 'tr-carousel',\n  template: `<div id=\"carousel\">\r\n\r\n  <div class=\"hideLeft\">\r\n    <img src=\"assets/avatars/1.svg\" alt=\"avatar1\">\r\n  </div>\r\n\r\n  <div class=\"hideLeft\">\r\n    <img src=\"assets/avatars/2.svg\" alt=\"avatar2\">\r\n  </div>\r\n\r\n  <div class=\"hideLeft\">\r\n    <img src=\"assets/avatars/3.svg\" alt=\"avatar3\">\r\n  </div>\r\n\r\n  <div class=\"hideLeft\">\r\n    <img src=\"assets/avatars/4.svg\" alt=\"avatar4\">\r\n  </div>\r\n\r\n  <div class=\"hideLeft\">\r\n    <img src=\"assets/avatars/5.svg\" alt=\"avatar5\">\r\n  </div>\r\n\r\n  <div class=\"prevLeftSecond\">\r\n    <img src=\"assets/avatars/6.svg\" alt=\"avatar6\">\r\n  </div>\r\n\r\n  <div class=\"prev\">\r\n    <img src=\"assets/avatars/7.svg\" alt=\"avatar7\">\r\n  </div>\r\n\r\n  <div class=\"selected\">\r\n    <img src=\"assets/avatars/8.svg\" alt=\"avatar8\">\r\n  </div>\r\n\r\n  <div class=\"next\">\r\n    <img src=\"assets/avatars/9.svg\" alt=\"avatar9\">\r\n  </div>\r\n\r\n  <div class=\"nextRightSecond\">\r\n    <img src=\"assets/avatars/10.svg\" alt=\"avatar10\">\r\n  </div>\r\n\r\n  <div class=\"hideRight\">\r\n    <img src=\"assets/avatars/11.svg\" alt=\"avatar11\">\r\n  </div>\r\n\r\n  <div class=\"hideRight\">\r\n    <img src=\"assets/avatars/12.svg\" alt=\"avatar12\">\r\n  </div>\r\n\r\n  <div class=\"hideRight\">\r\n    <img src=\"assets/avatars/13.svg\" alt=\"avatar13\">\r\n  </div>\r\n\r\n  <div class=\"hideRight\">\r\n    <img src=\"assets/avatars/14.svg\" alt=\"avatar14\">\r\n  </div>\r\n\r\n  <div class=\"hideRight\">\r\n    <img src=\"assets/avatars/15.svg\" alt=\"avatar15\">\r\n  </div>\r\n\r\n  <div class=\"hideRight\">\r\n    <img src=\"assets/avatars/16.svg\" alt=\"avatar16\">\r\n  </div>\r\n\r\n</div>\r\n\r\n<!--<div class=\"buttons\">-->\r\n<!--<button id=\"prev\" (click)=\"moveToSelected('prev')\">Prev</button>-->\r\n<!--<button id=\"next\" (click)=\"moveToSelected('next')\">Next</button>-->\r\n<!--</div>-->\r\n`,\n  styles: [`#carousel{height:400px;overflow:hidden}#carousel div{position:absolute;transition:left 1s,opacity 1s,z-index 0s,-webkit-transform 1s;transition:transform 1s,left 1s,opacity 1s,z-index 0s;transition:transform 1s,left 1s,opacity 1s,z-index 0s,-webkit-transform 1s;opacity:1}#carousel div img{width:400px;transition:width 1s}#carousel div.hideLeft{left:30%;opacity:0;-webkit-transform:translateY(50%) translateX(-50%);transform:translateY(50%) translateX(-50%)}#carousel div.hideLeft img{width:200px}#carousel div.hideRight{left:70%;opacity:0;-webkit-transform:translateY(50%) translateX(-50%);transform:translateY(50%) translateX(-50%)}#carousel div.hideRight img{width:200px}#carousel div.prev{z-index:5;left:30%;-webkit-transform:translateY(50px) translateX(-50%);transform:translateY(50px) translateX(-50%);opacity:.7}#carousel div.prev img{width:300px}#carousel div.prevLeftSecond{z-index:4;left:15%;-webkit-transform:translateY(50%) translateX(-50%);transform:translateY(50%) translateX(-50%);opacity:.5}#carousel div.prevLeftSecond img{width:200px}#carousel div.selected{z-index:10;left:50%;-webkit-transform:translateY(0) translateX(-50%);transform:translateY(0) translateX(-50%)}#carousel div.next{z-index:5;left:70%;-webkit-transform:translateY(50px) translateX(-50%);transform:translateY(50px) translateX(-50%);opacity:.7}#carousel div.next img{width:300px}#carousel div.nextRightSecond{z-index:4;left:85%;-webkit-transform:translateY(50%) translateX(-50%);transform:translateY(50%) translateX(-50%);opacity:.5}#carousel div.nextRightSecond img{width:200px}.buttons{position:fixed;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:10px}@media screen and (max-width:665px){#carousel div.next img,#carousel div.prev img{width:250px}#carousel div.hideLeft img,#carousel div.hideRight img,#carousel div.nextRightSecond img,#carousel div.prevLeftSecond img{width:150px}#carousel div img{width:350px}}@media screen and (max-width:500px){#carousel div.next img,#carousel div.prev img{width:200px}#carousel div.hideLeft img,#carousel div.hideRight img,#carousel div.nextRightSecond img,#carousel div.prevLeftSecond img{width:100px}#carousel div img{width:300px}}`]\n})\nexport class CarouselComponent implements OnInit {\n\n  @Output() avatarSelected: EventEmitter<string>;\n\n  // for gesture\n  start = {\n    t: null,\n    x: null,\n    y: null\n  };\n  end = {\n    x: null,\n    y: null\n  };\n  tracking = false;\n  thresholdTime = 500;\n  thresholdDistance = 100;\n\n  constructor(private elRef: ElementRef, private renderer: Renderer2) {\n    this.avatarSelected = new EventEmitter();\n  }\n\n  ngOnInit() {\n    // init avatar\n    this.avatarSelected.emit(this.elRef.nativeElement.querySelector('.selected').childNodes[0].alt);\n\n    // TODO implementare click su altri avatar e selezione in automatico\n    // $('#carousel div').click(function() {\n    //   moveToSelected($(this));\n    // });\n\n    // Swipe with PointerEvents\n    // https://developers.google.com/web/fundamentals/design-and-ux/input/touch/\n    const o = this.elRef.nativeElement.querySelector('#carousel');\n\n    this.renderer.listen(o, 'pointerdown', (event) => {\n      this.gestureStart(o, event);\n    });\n    this.renderer.listen(o, 'pointermove', (event) => {\n      this.gestureMove(o, event);\n    });\n    this.renderer.listen(o, 'pointerup', (event) => {\n      this.gestureEnd(o, event);\n    });\n    this.renderer.listen(o, 'pointerleave', (event) => {\n      this.gestureEnd(o, event);\n    });\n    this.renderer.listen(o, 'pointercancel', (event) => {\n      this.gestureEnd(o, event);\n    });\n\n  }\n\n  gestureStart (o, e) {\n    // o.innerHTML = '';\n    this.tracking = true;\n    /* Hack - would normally use e.timeStamp but it's whack in Fx/Android */\n    this.start.t = new Date().getTime();\n    this.start.x = e.clientX;\n    this.start.y = e.clientY;\n  }\n  gestureMove(o, e) {\n    if (this.tracking) {\n      e.preventDefault();\n      this.end.x = e.clientX;\n      this.end.y = e.clientY;\n    }\n  }\n  gestureEnd (o, e) {\n    if (this.tracking) {\n      this.tracking = false;\n      const now = new Date().getTime();\n      const deltaTime = now - this.start.t;\n      const deltaX = this.end.x - this.start.x;\n      const deltaY = this.end.y - this.start.y;\n      /* work out what the movement was */\n      if (deltaTime > this.thresholdTime) {\n        /* gesture too slow */\n        return;\n      } else {\n        if ((deltaX > this.thresholdDistance) && (Math.abs(deltaY) < this.thresholdDistance)) {\n          // o.innerHTML = 'swipe right';\n          this.moveToSelected('prev');\n        } else if ((-deltaX > this.thresholdDistance) && (Math.abs(deltaY) < this.thresholdDistance)) {\n          // o.innerHTML = 'swipe left';\n          this.moveToSelected('next');\n        } else if ((deltaY > this.thresholdDistance) && (Math.abs(deltaX) < this.thresholdDistance)) {\n          // o.innerHTML = 'swipe down';\n        } else if ((-deltaY > this.thresholdDistance) && (Math.abs(deltaX) < this.thresholdDistance)) {\n          // o.innerHTML = 'swipe up';\n        } else {\n          // o.innerHTML = '';\n        }\n      }\n    }\n  }\n\n  moveToSelected(element) {\n    if (element === 'next') {\n      const prev = this.elRef.nativeElement.querySelector('.selected');\n      if (prev.nextElementSibling) {  // if null, carousel is at the end of images(RX)\n        const curr = prev.nextElementSibling;\n        this.avatarSelected.emit(curr.childNodes[0].alt);\n        const next = curr.nextElementSibling;\n        let prevSecond = null;\n        let nextSecond = null;\n        let nextThird = null;\n        let prevThird = null;\n        if (next) {\n          nextSecond = next.nextElementSibling;\n        }\n        if (nextSecond) {\n          nextThird = nextSecond.nextElementSibling;\n        }\n        if (prev) {\n          prevSecond = prev.previousElementSibling;\n        }\n        if (prevSecond) {\n          prevThird = prevSecond.previousElementSibling;\n        }\n        this.renderer.removeClass(prev, 'selected');\n        this.renderer.addClass(prev, 'prev');\n        this.renderer.removeClass(curr, 'next');\n        this.renderer.addClass(curr, 'selected');\n        if (prevSecond) {\n          this.renderer.removeClass(prevSecond, 'prev');\n          this.renderer.addClass(prevSecond, 'prevLeftSecond');\n        }\n        if (prevThird) {\n          this.renderer.removeClass(prevThird, 'prevLeftSecond');\n          this.renderer.addClass(prevThird, 'hideLeft');\n        }\n        if (next) {\n          this.renderer.removeClass(next, 'nextRightSecond');\n          this.renderer.addClass(next, 'next');\n        }\n        if (nextSecond) {\n          this.renderer.removeClass(nextSecond, 'hideRight');\n          this.renderer.addClass(nextSecond, 'nextRightSecond');\n        }\n      }\n    } else if (element === 'prev') {\n      // selected = this.elRef.nativeElement.querySelector('.prev');\n      const next = this.elRef.nativeElement.querySelector('.selected');\n      if (next.previousElementSibling) {  // if null, carousel is at the end of images(SX)\n        const curr = next.previousElementSibling;\n        this.avatarSelected.emit(curr.childNodes[0].alt);\n        const prev = curr.previousElementSibling;\n        let prevSecond = null;\n        let nextSecond = null;\n        let nextThird = null;\n        let prevThird = null;\n        if (next) {\n          nextSecond = next.nextElementSibling;\n        }\n        if (nextSecond) {\n          nextThird = nextSecond.nextElementSibling;\n        }\n        if (prev) {\n          prevSecond = prev.previousElementSibling;\n        }\n        if (prevSecond) {\n          prevThird = prevSecond.previousElementSibling;\n        }\n        this.renderer.removeClass(next, 'selected');\n        this.renderer.addClass(next, 'next');\n        this.renderer.removeClass(curr, 'prev');\n        this.renderer.addClass(curr, 'selected');\n        if (nextSecond) {\n          this.renderer.removeClass(nextSecond, 'next');\n          this.renderer.addClass(nextSecond, 'nextRightSecond');\n        }\n        if (nextThird) {\n          this.renderer.removeClass(nextThird, 'nextRightSecond');\n          this.renderer.addClass(nextThird, 'hideRight');\n        }\n        if (prev) {\n          this.renderer.removeClass(prev, 'prevLeftSecond');\n          this.renderer.addClass(prev, 'prev');\n        }\n        if (prevSecond) {\n          this.renderer.removeClass(prevSecond, 'hideLeft');\n          this.renderer.addClass(prevSecond, 'prevLeftSecond');\n        }\n      }\n    } else {\n      // TODO implementare click su altri avatar e selezione in automatico\n      // selected = element;\n      // selected = this.renderer.selectRootElement('.selected');\n    }\n\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CarouselComponent } from './carousel.component';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [CarouselComponent],\n  exports: [CarouselComponent]\n})\nexport class CarouselModule { }\n"]}